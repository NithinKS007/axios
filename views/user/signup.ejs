<%- include('../layouts/adminLayouts/header') %>

<!-- used adminlayouts in the registration page for the user its done purposefully because its assets are in that folder so dont change -->
<main>
    <style>
        .content-main {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px 0;
        }
        .card-login {
            width: 100%;
            max-width: 400px;
        }
        .form-control {
            margin-bottom: 10px;
        }
        .error {
            font-size: 0.8em;
            color: red;
        }
        .small-text {
            font-size: 0.8em;
            line-height: 1.2;
        }
    </style>
    
    <section class="content-main">
        <div class="card card-login">
            <div class="card-body">
                <h4 class="card-title mb-3 text-center">Create an Account</h4>
                <form method="post" id="formData" action="/signup">
                    <input class="form-control" id="fname" name="fname" placeholder="First Name" type="text">
                    <span id="fnameError" class="error"></span>
    
                    <input class="form-control" id="lname" name="lname" placeholder="Last Name" type="text">
                    <span id="lnameError" class="error"></span>
    
                    <input class="form-control" id="email" name="email" placeholder="Email" type="text">
                    <span id="emailError" class="error"></span>
    
                    <input class="form-control" id="phone" name="phone" placeholder="Mobile" type="text">
                    <span id="phoneError" class="error"></span>
    
                    <input class="form-control" id="password" name="password" type="password" placeholder="Password">
                    <span id="passwordError" class="error"></span>
    
                    <input class="form-control" id="cPassword" name="cPassword" type="password" placeholder="Confirm Password">
                    <span id="passwordError" class="error"></span>
    
                    <p class="small-text text-center text-muted mb-3">By signing up, you confirm that you've read and accepted our User Notice and Privacy Policy.</p>
    
                    <button type="submit" class="btn btn-primary w-100 mb-3">Sign Up</button>
                </form>
    
                <p class="text-center small-text">Already have an account? <a href="/signin">Sign in now</a><br><a href="/">or Go to Home</a></p>
            </div>
        </div>
    </section>
</main>

<!-- used adminlayouts in the registration page for the user its done purposefully because its assets are in that folder so dont change -->

<script>

    const form = document.getElementById('formData')
    form.addEventListener('submit', function(event) {

        event.preventDefault(); 

        if (validation()) {
            
            this.submit(); 
        }
        
    });

    const validation = () =>{

        const fnameError = document.getElementById('fnameError')
        const lnameError = document.getElementById('lnameError')
        const emailError = document.getElementById('emailError')
        const phoneError = document.getElementById('phoneError')
        const passwordError = document.getElementById('passwordError')

        fnameError.textContent = ''
        lnameError.textContent = ''
        emailError.textContent = ''
        phoneError.textContent = ''
        passwordError.textContent = ''

        const fname = document.getElementById('fname').value
        const lname = document.getElementById('lname').value
        const email = document.getElementById('email').value
        const phone = document.getElementById('phone').value
        const password = document.getElementById('password').value

        let isValid = true;

        if(fname.trim()===''){

            fnameError.textContent = "First name is required"

            isValid = false

        }else if(!isValidFirstName(fname.trim())){

            fnameError.textContent = "First name must be  2 to 30 charactors and letters only"

            isValid = false
        }

        if(lname.trim()===''){

            lnameError.textContent = "Last name is required"

            isValid = false

        }else if(!isValidLastName(lname.trim())){

            lnameError.textContent = "First name must be  2 to 30 charactors and letters only"

            isValid = false
        }

        if(email.trim()===''){

            emailError.textContent = "Email is required"

            isValid = false

        }else if(!isValidEmail(email.trim())){

            emailError.textContent = "Please enter a valid email"

            isValid = false
        }

        if(phone.trim()===''){

            phoneError.textContent = "Phone number is required"

            isValid = false

        }else if(!isvalidPhone(phone.trim())){

            phoneError.textContent = "Please enter a valid phone number"

            isValid = false
        }

        if(password.trim()===''){

            passwordError.textContent = "Password is required"

            isValid = false
        }else if(!isValidPassword(password.trim())){

            passwordError.textContent = "Please enter a valid Password'Password must be at least 6 characters long and include at least one number, one lowercase letter, and one uppercase letter"

            isValid = false
        }

        return isValid

    }


    const isValidFirstName = (fname) =>{

        const fnameRegex = /^[A-Za-z]{2,30}$/
        return fnameRegex.test(fname) 
    }
    const isValidLastName = (lname) =>{

        const lnameRegex = /^[A-Za-z]{2,30}$/
        return lnameRegex.test(lname) 
    }

    const isValidEmail = (email) =>{

        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
        return emailRegex.test(email);
    }

    const isvalidPhone = (phone) =>{

        const phoneRegex = /^\+?(\d{1,3})?[-.\s]?(\(?\d{1,4}\)?)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}$/
        return phoneRegex.test(phone)
    }

    const isValidPassword = (password) =>{

        const passwordRegex = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}$/;
        return passwordRegex.test(password);
    }


   const inputs = document.querySelectorAll('input');
for (let i = 0; i < inputs.length; i++) {
    inputs[i].addEventListener('input', function() {
        validateForm();
    });
}



</script>


<%- include('../layouts/adminLayouts/footer') %>